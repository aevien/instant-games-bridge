<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
</head>

<body>
  <div class="container my-3">
    <div class="row" id="options-section">
      <div class="col">
        <div class="card">
          <div class="card-body text-center">
            <h5 class="card-title">Instant Games Bridge Sandbox</h5>
            <p class="card-text">Loading..</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row gy-3">
      <!--Platform-->
      <div class="col-12" id="platform-section" style="display: none">
        <div class="card">
          <h5 class="card-header">
            Platform
          </h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">ID: <span id="platform-id-text"></span></li>
            <li class="list-group-item">Language: <span id="platform-language-text"></span></li>
            <li class="list-group-item">Payload: <span id="platform-payload-text"></span></li>
            <li class="list-group-item">TLD: <span id="platform-tld-text"></span></li>
          </ul>
          <div class="card-body">
            <h5 class="card-title">Send Message Status: <span id="platform-send-message-status"></span></h5>
            <div class="mb-3">
              <input type="text" class="form-control" id="platform-send-message-input" placeholder="Message">
            </div>
            <button type="button" class="btn btn-primary" id="platform-send-message-button">Send Message</button>
          </div>
        </div>
      </div>

      <!--Device-->
      <div class="col-12" id="device-section" style="display: none">
        <div class="card">
          <h5 class="card-header">Device</h5>
          <div class="card-body">
            <p class="card-text">Type: <span id="device-type-text"></span></p>
          </div>
        </div>
      </div>

      <!--Player-->
      <div class="col-12" id="player-section" style="display: none">
        <div class="card">
          <h5 class="card-header">Player</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Is Authorization Supported: <span
                id="is-player-authorization-supported-text"></span></li>
            <li class="list-group-item">Is Authorized: <span id="is-player-authorized-text"></span></li>
            <li class="list-group-item">ID: <span id="player-id-text"></span></li>
            <li class="list-group-item">Name: <span id="player-name-text"></span></li>
          </ul>
          <div class="card-body">
            <h5 class="card-title">Photos:</h5>
            <span id="player-photos-text"></span>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="authorize-player-yandex-scopes-input">
                <label class="form-check-label" for="authorize-player-yandex-scopes-input">
                  Yandex: Authorization Scopes
                </label>
              </div>
            </div>
            <button type="button" class="btn btn-primary" id="authorize-player-button">Authorize</button>
          </div>
        </div>
      </div>

      <!--Storage-->
      <div class="col-12" id="storage-section" style="display: none">
        <div class="card">
          <h5 class="card-header">Storage</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Is LocalStorage Supported: <span
                id="is-storage-local-storage-supported-text"></span></li>
            <li class="list-group-item">Is LocalStorage Available: <span
                id="is-storage-local-storage-available-text"></span></li>
            <li class="list-group-item">Is PlatformInternal Supported: <span
                id="is-storage-platform-internal-supported-text"></span></li>
            <li class="list-group-item">Is PlatformInternal Available: <span
                id="is-storage-platform-internal-available-text"></span></li>
          </ul>
          <div class="card-body">
            <div class="mb-3">
              <div class="row">
                <div class="col">
                  <input type="text" class="form-control" id="storage-data-coins-input" placeholder="Coins">
                </div>
                <div class="col">
                  <input type="text" class="form-control" id="storage-data-level-input" placeholder="Level">
                </div>
              </div>
            </div>
            <div class="mb-3">
              <select class="form-select" aria-label="Storage select" id="storage-type-input">
                <option value="local_storage">LocalStorage</option>
                <option value="platform_internal">PlatformInternal</option>
              </select>
            </div>
            <div class="btn-group" role="group" aria-label="Basic example">
              <button type="button" class="btn btn-primary" id="get-storage-data-button">Get Data</button>
              <button type="button" class="btn btn-success" id="set-storage-data-button">Set Data</button>
              <button type="button" class="btn btn-danger" id="delete-storage-data-button">Delete Data</button>
            </div>
          </div>
        </div>
      </div>

      <!--Advertisement-->
      <div class="col-12" id="advertisement-section" style="display: none">
        <div class="card">
          <h5 class="card-header">Advertisement</h5>
          <div class="card-body">
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" id="advertisement-minimum-delay-between-interstitial-input"
                  placeholder="Minimum Delay Between Interstitial">
              </div>
              <div class="col">
                <button type="button" class="btn btn-primary"
                  id="advertisement-set-minimum-delay-between-interstitial-button">Set Minimum Delay Between
                  Interstitial</button>
              </div>
            </div>
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Is AdBlock Detected: <span id="advertisement-is-adblock-detected-text"></span>
            </li>
            <li class="list-group-item">Is Banner Supported: <span id="advertisement-is-banner-supported-text"></span>
            </li>
            <li class="list-group-item">Last Banner States: <span id="advertisement-banner-state-text"></span></li>
            <li class="list-group-item">Last Interstitial States: <span
                id="advertisement-interstitial-state-text"></span></li>
            <li class="list-group-item">Last Rewarded States: <span id="advertisement-rewarded-state-text"></span></li>
          </ul>
          <div class="card-body">
            <div class="btn-group" role="group" aria-label="Basic example">
              <button type="button" class="btn btn-primary" id="advertisement-show-banner-button">Show Banner</button>
              <button type="button" class="btn btn-success" id="advertisement-hide-banner-button">Hide Banner</button>
              <button type="button" class="btn btn-danger" id="advertisement-show-interstitial-button">Show
                Interstitial</button>
              <button type="button" class="btn btn-warning"
                id="advertisement-show-interstitial-ignore-delay-button">Show Interstitial (ignore delay)</button>
              <button type="button" class="btn btn-info" id="advertisement-show-rewarded-button">Show
                Rewarded</button>
                <button type="button" class="btn btn-info" id="advertisement-is-adblock-detected-button">Is AdBlock Detected</button>
            </div>
          </div>
        </div>
      </div>

      <!--Social-->
      <div class="col-12" id="social-section" style="display: none">
        <div class="card">
          <h5 class="card-header">Social</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Is Share Supported: <span id="social-is-share-supported-text"></span></li>
            <li class="list-group-item">Is Invite Friends Supported: <span
                id="social-is-invite-friends-supported-text"></span></li>
            <li class="list-group-item">Is Join Community Supported: <span
                id="social-is-join-community-supported-text"></span></li>
            <li class="list-group-item">Is Create Post Supported: <span
                id="social-is-create-post-supported-text"></span></li>
            <li class="list-group-item">Is Add To Home Screen Supported: <span
                id="social-is-add-to-home-screen-supported-text"></span></li>
            <li class="list-group-item">Is Add To Favorites Supported: <span
                id="social-is-add-to-favorites-supported-text"></span></li>
            <li class="list-group-item">Is Rate Supported: <span id="social-is-rate-supported-text"></span></li>
          </ul>
          <div class="card-body">
            <div class="mb-3">
              <div class="btn-group" role="group" aria-label="Basic example">
                <button type="button" class="btn btn-primary" id="social-invite-friends-button">Invite Friends</button>
                <button type="button" class="btn btn-success" id="social-add-to-home-screen-button">Add To Home
                  Screen</button>
                <button type="button" class="btn btn-danger" id="social-add-to-favorites-button">Add To
                  Favorites</button>
                <button type="button" class="btn btn-warning" id="social-rate-button">Rate</button>
              </div>
            </div>
            <div class="mb-3">
              <div class="row">
                <div class="col">
                  <input type="text" class="form-control" id="social-vk-share-link-input" placeholder="VK: Link">
                </div>
                <div class="col">
                  <button type="button" class="btn btn-primary" id="social-share-button">Share</button>
                </div>
              </div>
            </div>
            <div class="mb-3">
              <div class="row">
                <div class="col">
                  <input type="text" class="form-control" id="social-vk-group-id-input" placeholder="VK: Group ID">
                </div>
                <div class="col">
                  <button type="button" class="btn btn-primary" id="social-join-community-button">Join
                    Community</button>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" id="social-create-post-message-input" placeholder="VK: Message">
              </div>
              <div class="col">
                <input type="text" class="form-control" id="social-create-post-attachments-input"
                  placeholder="VK: Attachments">
              </div>
              <div class="col">
                <button type="button" class="btn btn-primary" id="social-create-post-button">Create Post</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!--Leaderboard-->
      <div class="col-12" id="leaderboard-section" style="display: none">
        <div class="card">
          <h5 class="card-header">Leaderboard</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Is Supported: <span id="leaderboard-is-supported-text"></span></li>
            <li class="list-group-item">Is Native Popup Supported: <span
                id="leaderboard-is-native-popup-supported-text"></span></li>
            <li class="list-group-item">Is Multiple Boards Supported: <span
                id="leaderboard-is-multiple-boards-supported-text"></span></li>
            <li class="list-group-item">Is Set Score Supported: <span
                id="leaderboard-is-set-score-supported-text"></span></li>
            <li class="list-group-item">Is Get Score Supported: <span
                id="leaderboard-is-get-score-supported-text"></span></li>
            <li class="list-group-item">Is Get Entries Supported: <span
                id="leaderboard-is-get-entries-supported-text"></span></li>
          </ul>
          <div class="card-body">
            <div class="mb-3">
              <div class="row">
                <div class="col">
                  <input type="text" class="form-control" id="leaderboard-board-id-input"
                    placeholder="Yandex: Board Name" />
                </div>
                <div class="col">
                  <input type="text" class="form-control" id="leaderboard-score-input" placeholder="Score" />
                </div>
                <div class="col">
                  <div class="btn-group" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-primary" id="leaderboard-set-score-button">Set Score</button>
                    <button type="button" class="btn btn-success" id="leaderboard-get-score-button">Get Score</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="mb-3">
              <input class="form-check-input" type="checkbox" value="" id="leaderboard-vk-global-input">
              <label for="leaderboard-vk-global-input" class="form-label">VK: Global</label>
            </div>
            <div class="mb-3">
              <button type="button" class="btn btn-primary" id="leaderboard-show-native-popup-button">Show Native
                Popup</button>
            </div>
            <div class="mb-3">
              <input class="form-check-input" type="checkbox" value="" id="leaderboard-yandex-include-user-input">
              <label for="leaderboard-yandex-include-user-input" class="form-label">Yandex: Include User</label>
            </div>
            <div class="mb-3">
              <div class="row">
                <div class="col">
                  <input type="text" class="form-control" id="leaderboard-yandex-quantity-around-input"
                    placeholder="Yandex: Quantity Around">
                </div>
                <div class="col">
                  <input type="text" class="form-control" id="leaderboard-yandex-quantity-top-input"
                    placeholder="Yandex: Quantity Top">
                </div>
              </div>
            </div>
            <div class="mb-3">
              <button type="button" class="btn btn-primary" id="leaderboard-get-entries-button">Get Entries</button>
            </div>
            <p id="leaderboard-entries-container"></p>
          </div>
        </div>
      </div>

      <!--Payments-->
      <div class="col-12" id="payments-section" style="display: none">
        <div class="card">
          <h5 class="card-header">Payments</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Is Supported: <span id="payments-is-supported-text"></span></li>
          </ul>
          <div class="card-body">
            <div class="mb-3">
              <button type="button" class="btn btn-primary" id="payments-get-purchases-button">Get Purchases</button>
            </div>
            <pre id="payments-purchases-container">All purchases will be here</pre>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <button type="button" class="btn btn-primary" id="payments-get-catalog-button">Get Catalog</button>
            </div>
            <pre id="payments-catalog-container">Catalog will be here</pre>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <div class="row">
                <div class="col">
                  <input type="text" class="form-control" id="payments-id-input" placeholder="Yandex ID">
                </div>
                <div class="col">
                  <button type="button" class="btn btn-primary" id="payments-purchase-button">Purchase</button>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" id="payments-token-input" placeholder="Yandex Token">
              </div>
              <div class="col">
                <button type="button" class="btn btn-primary" id="payments-consume-button">Consume</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!--Remote Config-->
      <div class="col-12" id="remote-config-section" style="display: none">
        <div class="card">
          <div class="card-header">
            Remote Config
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Is Supported: <span id="remote-config-is-supported-text"></span></li>
          </ul>
          <div class="card-body">
            <div class="mb-3">
              <button type="button" class="btn btn-primary" id="get-remote-config-button">Get Config</button>
            </div>
            <pre id="remote-config-container">Config data will be here</pre>
          </div>
        </div>
      </div>

      <!--Clipboard-->
      <div class="col-12" id="clipboard-section" style="display: none">
        <div class="card">
          <div class="card-header">
            Clipboard
          </div>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Is Supported: <span id="clipboard-is-supported-text"></span></li>
          </ul>
          <div class="card-body">
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" id="clipboard-input" placeholder="Text">
              </div>
              <div class="col">
                <div class="btn-group" role="group">
                  <button type="button" class="btn btn-primary" id="clipboard-read-button">Read</button>
                  <button type="button" class="btn btn-success" id="clipboard-write-button">Write</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="banner-container"></div>

    <script type="module" src="/main.js"></script>
    <script>

      document.addEventListener('DOMContentLoaded', function () {

        const optionsSection = document.getElementById('options-section')
        const platformSection = document.getElementById('platform-section')
        const deviceSection = document.getElementById('device-section')
        const playerSection = document.getElementById('player-section')
        const storageSection = document.getElementById('storage-section')
        const advertisementSection = document.getElementById('advertisement-section')
        const socialSection = document.getElementById('social-section')
        const leaderboardSection = document.getElementById('leaderboard-section')
        const paymentsSection = document.getElementById('payments-section')
        const remoteConfigSection = document.getElementById('remote-config-section')
        const clipboardSection = document.getElementById('clipboard-section')

        platformSection.style.display = 'none'
        deviceSection.style.display = 'none'
        playerSection.style.display = 'none'
        storageSection.style.display = 'none'
        advertisementSection.style.display = 'none'
        socialSection.style.display = 'none'
        leaderboardSection.style.display = 'none'
        paymentsSection.style.display = 'none'
        remoteConfigSection.style.display = 'none'
        clipboardSection.style.display = 'none'

        const platformIdText = document.getElementById('platform-id-text')
        const platformLanguageText = document.getElementById('platform-language-text')
        const platformPayloadText = document.getElementById('platform-payload-text')
        const platformTldText = document.getElementById('platform-tld-text')
        const platformSendMessageStatus = document.getElementById('platform-send-message-status')
        const platformMessageInput = document.getElementById('platform-send-message-input')
        const platformMessageButton = document.getElementById('platform-send-message-button')

        const deviceTypeText = document.getElementById('device-type-text')

        const isPlayerAuthorizationSupportedText = document.getElementById('is-player-authorization-supported-text')
        const isPlayerAuthorizedText = document.getElementById('is-player-authorized-text')
        const playerIdText = document.getElementById('player-id-text')
        const playerNameText = document.getElementById('player-name-text')
        const playerPhotosText = document.getElementById('player-photos-text')
        const authorizePlayerYandexScopesInput = document.getElementById('authorize-player-yandex-scopes-input')
        const authorizePlayerButton = document.getElementById('authorize-player-button')

        const isStorageLocalStorageSupportedText = document.getElementById('is-storage-local-storage-supported-text')
        const isStorageLocalStorageAvailableText = document.getElementById('is-storage-local-storage-available-text')
        const isStoragePlatformInternalSupportedText = document.getElementById('is-storage-platform-internal-supported-text')
        const isStoragePlatformInternalAvailableText = document.getElementById('is-storage-platform-internal-available-text')
        const storageDataCoinsInput = document.getElementById('storage-data-coins-input')
        const storageDataLevelInput = document.getElementById('storage-data-level-input')
        const storageTypeInput = document.getElementById('storage-type-input')
        const getStorageDataButton = document.getElementById('get-storage-data-button')
        const setStorageDataButton = document.getElementById('set-storage-data-button')
        const deleteStorageDataButton = document.getElementById('delete-storage-data-button')

        const advertisementMinimumDelayBetweenInterstitialInput = document.getElementById('advertisement-minimum-delay-between-interstitial-input')
        const advertisementSetMinimumDelayBetweenInterstitialButton = document.getElementById('advertisement-set-minimum-delay-between-interstitial-button')
        const advertisementInterstitialStateText = document.getElementById('advertisement-interstitial-state-text')
        const advertisementRewardedStateText = document.getElementById('advertisement-rewarded-state-text')
        const advertisementAdBlockDetectButton = document.getElementById('advertisement-is-adblock-detected-button')
        const advertisementIsAdBlockDetectedText = document.getElementById('advertisement-is-adblock-detected-text')
        const advertisementIsBannerSupportedText = document.getElementById('advertisement-is-banner-supported-text')
        const advertisementBannerStateText = document.getElementById('advertisement-banner-state-text')
        const advertisementShowBannerButton = document.getElementById('advertisement-show-banner-button')
        const advertisementHideBannerButton = document.getElementById('advertisement-hide-banner-button')
        const advertisementShowInterstitialButton = document.getElementById('advertisement-show-interstitial-button')
        const advertisementShowInterstitialIgnoreDelayButton = document.getElementById('advertisement-show-interstitial-ignore-delay-button')
        const advertisementShowRewardedButton = document.getElementById('advertisement-show-rewarded-button')

        const socialIsShareSupportedText = document.getElementById('social-is-share-supported-text')
        const socialIsInviteFriendsSupportedText = document.getElementById('social-is-invite-friends-supported-text')
        const socialIsJoinCommunitySupportedText = document.getElementById('social-is-join-community-supported-text')
        const socialIsCreatePostSupportedText = document.getElementById('social-is-create-post-supported-text')
        const socialIsAddToHomeScreenSupportedText = document.getElementById('social-is-add-to-home-screen-supported-text')
        const socialIsAddToFavoritesSupportedText = document.getElementById('social-is-add-to-favorites-supported-text')
        const socialIsRateSupportedText = document.getElementById('social-is-rate-supported-text')
        const socialVkGroupIdInput = document.getElementById('social-vk-group-id-input')
        const socialVkShareLinkInput = document.getElementById('social-vk-share-link-input')
        const socialShareButton = document.getElementById('social-share-button')
        const socialInviteFriendsButton = document.getElementById('social-invite-friends-button')
        const socialJoinCommunityButton = document.getElementById('social-join-community-button')
        const socialCreatePostMessageInput = document.getElementById('social-create-post-message-input')
        const socialCreatePostAttachmentsInput = document.getElementById('social-create-post-attachments-input')
        const socialCreatePostButton = document.getElementById('social-create-post-button')
        const socialAddToHomeScreenButton = document.getElementById('social-add-to-home-screen-button')
        const socialAddToFavoritesButton = document.getElementById('social-add-to-favorites-button')
        const socialRateButton = document.getElementById('social-rate-button')

        const leaderboardIsSupportedText = document.getElementById('leaderboard-is-supported-text')
        const leaderboardIsNativePopupSupportedText = document.getElementById('leaderboard-is-native-popup-supported-text')
        const leaderboardIsMultipleBoardsSupportedText = document.getElementById('leaderboard-is-multiple-boards-supported-text')
        const leaderboardIsGetScoreSupportedText = document.getElementById('leaderboard-is-get-score-supported-text')
        const leaderboardIsSetScoreSupportedText = document.getElementById('leaderboard-is-set-score-supported-text')
        const leaderboardIsGetEntriesSupportedText = document.getElementById('leaderboard-is-get-entries-supported-text')
        const leaderboardIdInput = document.getElementById('leaderboard-board-id-input')
        const leaderboardScoreInput = document.getElementById('leaderboard-score-input')
        const leaderboardSetScoreButton = document.getElementById('leaderboard-set-score-button')
        const leaderboardGetScoreButton = document.getElementById('leaderboard-get-score-button')
        const leaderboardVkGlobalInput = document.getElementById('leaderboard-vk-global-input')
        const leaderboardShowNativePopupButton = document.getElementById('leaderboard-show-native-popup-button')
        const leaderboardYandexIncludeUserInput = document.getElementById('leaderboard-yandex-include-user-input')
        const leaderboardYandexQuantityAroundInput = document.getElementById('leaderboard-yandex-quantity-around-input')
        const leaderboardYandexQuantityTopInput = document.getElementById('leaderboard-yandex-quantity-top-input')
        const leaderboardGetEntriesButton = document.getElementById('leaderboard-get-entries-button')
        const leaderboardEntriesContainer = document.getElementById('leaderboard-entries-container')

        const paymentsIsSupportedText = document.getElementById('payments-is-supported-text')
        const paymentsGetPurchasesButton = document.getElementById('payments-get-purchases-button')
        const paymentPurchasesContainer = document.getElementById('payments-purchases-container')
        const paymentsGetCatalogButton = document.getElementById('payments-get-catalog-button')
        const paymentCatalogContainer = document.getElementById('payments-catalog-container')
        const paymentsPurchaseButton = document.getElementById('payments-purchase-button')
        const paymentsConsumeButton = document.getElementById('payments-consume-button')

        const remoteConfigIsSupportedText = document.getElementById('remote-config-is-supported-text')
        const remoteConfigButton = document.getElementById('get-remote-config-button')
        const remoteConfigContainer = document.getElementById('remote-config-container')

        const clipboardIsSupportedText = document.getElementById('clipboard-is-supported-text')
        const clipboardInput = document.getElementById('clipboard-input')
        const clipboardReadButton = document.getElementById('clipboard-read-button')
        const clipboardWriteButton = document.getElementById('clipboard-write-button')

        var lastInterstitialStates = []
        var lastRewardedStates = []
        var lastBannerStates = []

        let options = {
          'platforms': {
            'game_distribution': {
              gameId: '74473b0d8a42415db75fef0a005b9654'
            },
            'vk_play': {
              gameId: '33134'
            },
            'telegram': {
              adsgramBlockId: ''
            }
          }
        }

        function drawPhotos() {
          playerPhotosText.innerHTML = '';

          const row = document.createElement('div');
          row.className = 'row';

          bridge.player.photos.forEach(photo => {
            const col = document.createElement('div');
            col.className = 'col text-center';

            const img = document.createElement('img');
            img.src = photo;
            img.alt = 'Player Photo';
            img.className = 'img-fluid img-thumbnail';
            img.style.marginBottom = '15px';

            col.appendChild(img);
            row.appendChild(col);
          });

          // Добавим строку с колонками в playerPhotosText
          playerPhotosText.appendChild(row);
        }

        bridge
          .initialize(options)
          .then(() => {
            optionsSection.style.display = 'none'

            platformIdText.innerText = bridge.platform.id
            platformLanguageText.innerText = bridge.platform.language
            platformPayloadText.innerText = bridge.platform.payload
            platformTldText.innerText = bridge.platform.tld

            deviceTypeText.innerText = bridge.device.type

            isPlayerAuthorizationSupportedText.innerText = bridge.player.isAuthorizationSupported
            isPlayerAuthorizedText.innerText = bridge.player.isAuthorized

            playerIdText.innerText = bridge.player.id
            playerNameText.innerText = bridge.player.name

            drawPhotos();

            isStorageLocalStorageSupportedText.innerText = bridge.storage.isSupported(bridge.STORAGE_TYPE.LOCAL_STORAGE)
            isStorageLocalStorageAvailableText.innerText = bridge.storage.isAvailable(bridge.STORAGE_TYPE.LOCAL_STORAGE)
            isStoragePlatformInternalSupportedText.innerText = bridge.storage.isSupported(bridge.STORAGE_TYPE.PLATFORM_INTERNAL)
            isStoragePlatformInternalAvailableText.innerText = bridge.storage.isAvailable(bridge.STORAGE_TYPE.PLATFORM_INTERNAL)

            socialIsShareSupportedText.innerText = bridge.social.isShareSupported
            socialIsInviteFriendsSupportedText.innerText = bridge.social.isInviteFriendsSupported
            socialIsJoinCommunitySupportedText.innerText = bridge.social.isJoinCommunitySupported
            socialIsCreatePostSupportedText.innerText = bridge.social.isCreatePostSupported
            socialIsAddToHomeScreenSupportedText.innerText = bridge.social.isAddToHomeScreenSupported
            socialIsAddToFavoritesSupportedText.innerText = bridge.social.isAddToFavoritesSupported
            socialIsRateSupportedText.innerText = bridge.social.isRateSupported

            advertisementIsBannerSupportedText.innerText = bridge.advertisement.isBannerSupported
            advertisementBannerStateText.innerText = bridge.advertisement.bannerState
            advertisementMinimumDelayBetweenInterstitialInput.value = bridge.advertisement.minimumDelayBetweenInterstitial

            bridge.advertisement.on('interstitial_state_changed', state => {
              lastInterstitialStates.push(state)

              if (lastInterstitialStates.length > 3) {
                lastInterstitialStates = lastInterstitialStates.slice(lastInterstitialStates.length - 3)
              }

              advertisementInterstitialStateText.innerText = lastInterstitialStates.join(' → ')
            })

            bridge.advertisement.on('rewarded_state_changed', state => {
              lastRewardedStates.push(state)

              if (lastRewardedStates.length > 3) {
                lastRewardedStates = lastRewardedStates.slice(lastRewardedStates.length - 3)
              }

              advertisementRewardedStateText.innerText = lastRewardedStates.join(' → ')
            })

            bridge.advertisement.on('banner_state_changed', state => {
              lastBannerStates.push(state)

              if (lastBannerStates.length > 3) {
                lastBannerStates = lastBannerStates.slice(lastBannerStates.length - 3)
              }

              advertisementBannerStateText.innerText = lastBannerStates.join(' → ')
            })

            leaderboardIsSupportedText.innerText = bridge.leaderboard.isSupported
            leaderboardIsNativePopupSupportedText.innerText = bridge.leaderboard.isNativePopupSupported
            leaderboardIsMultipleBoardsSupportedText.innerText = bridge.leaderboard.isMultipleBoardsSupported
            leaderboardIsGetScoreSupportedText.innerText = bridge.leaderboard.isGetScoreSupported
            leaderboardIsSetScoreSupportedText.innerText = bridge.leaderboard.isSetScoreSupported
            leaderboardIsGetEntriesSupportedText.innerText = bridge.leaderboard.isGetEntriesSupported

            paymentsIsSupportedText.innerText = bridge.payments.isSupported
            remoteConfigIsSupportedText.innerText = bridge.remoteConfig.isSupported
            clipboardIsSupportedText.innerText = bridge.clipboard.isSupported

            platformSection.style.display = 'block'
            deviceSection.style.display = 'block'
            playerSection.style.display = 'block'
            storageSection.style.display = 'block'
            advertisementSection.style.display = 'block'
            socialSection.style.display = 'block'
            leaderboardSection.style.display = 'block'
            paymentsSection.style.display = 'block'
            remoteConfigSection.style.display = 'block'
            clipboardSection.style.display = 'block'
          })

        platformMessageButton.addEventListener('click', () => {
          bridge
            .platform
            .sendMessage(platformMessageInput.value)
            .then(() => {
              platformSendMessageStatus.innerText = 'Success'
            })
            .catch((error) => {
              platformSendMessageStatus.innerText = 'Failed: ' + error;
            })
        })

        authorizePlayerButton.addEventListener('click', () => {
          bridge
            .player
            .authorize({ yandex: { scopes: authorizePlayerYandexScopesInput.checked } })
            .then(() => {
              isPlayerAuthorizedText.innerText = bridge.player.isAuthorized
              playerIdText.innerText = bridge.player.id
              playerNameText.innerText = bridge.player.name
              drawPhotos();
            })
        })

        getStorageDataButton.addEventListener('click', () => {
          bridge.storage
            .get(['coins', 'level'], storageTypeInput.value)
            .then((data) => {
              if (data) {
                storageDataCoinsInput.value = data[0]
                storageDataLevelInput.value = data[1]
              }
            })
            .catch(error => console.log(error))
        })

        setStorageDataButton.addEventListener('click', () => {
          bridge.storage
            .set(['coins', 'level'], [storageDataCoinsInput.value, storageDataLevelInput.value], storageTypeInput.value)
            .catch(error => console.log(error))
        })

        deleteStorageDataButton.addEventListener('click', () => {
          bridge.storage
            .delete(['coins', 'level'], storageTypeInput.value)
            .then(() => {
              storageDataCoinsInput.value = ''
              storageDataLevelInput.value = ''
            })
            .catch(error => console.log(error))
        })

        advertisementSetMinimumDelayBetweenInterstitialButton.addEventListener('click', () => {
          let value = advertisementMinimumDelayBetweenInterstitialInput.value
          bridge.advertisement.setMinimumDelayBetweenInterstitial(value)
          advertisementMinimumDelayBetweenInterstitialInput.value = bridge.advertisement.minimumDelayBetweenInterstitial
        })

        advertisementShowBannerButton.addEventListener('click', () => {
          if (bridge.platform.id === bridge.PLATFORM_ID.CRAZY_GAMES || bridge.platform.id === bridge.PLATFORM_ID.GAME_DISTRIBUTION) {
            let bannerContainer = document.getElementById('banner-container')
            bannerContainer.style.display = 'block'
          }

          let options = {
            'crazy_games': {
              containerId: 'banner-container'
            },
            'game_distribution': {
              containerId: 'banner-container'
            }
          }
          bridge.advertisement.showBanner(options)
        })

        advertisementHideBannerButton.addEventListener('click', () => {
          if (bridge.platform.id === bridge.PLATFORM_ID.CRAZY_GAMES || bridge.platform.id === bridge.PLATFORM_ID.GAME_DISTRIBUTION) {
            let bannerContainer = document.getElementById('banner-container')
            bannerContainer.style.display = 'none'
          }

          bridge.advertisement.hideBanner()
        })

        advertisementShowInterstitialButton.addEventListener('click', () => {
          bridge.advertisement.showInterstitial()
        })

        advertisementShowInterstitialIgnoreDelayButton.addEventListener('click', () => {
          bridge.advertisement.showInterstitial({ ignoreDelay: true })
        })

        advertisementShowRewardedButton.addEventListener('click', () => {
          bridge.advertisement.showRewarded()
        })

        advertisementAdBlockDetectButton.addEventListener('click', () => {
            bridge.advertisement.isAdBlockDetected()
                .then((res) => {
                    advertisementIsAdBlockDetectedText.innerText = res
                })
        })

        socialShareButton.addEventListener('click', () => {
          let data = {
            vk: {
              link: socialVkShareLinkInput.value
            }
          }

          bridge.social.share(data)
        })

        socialInviteFriendsButton.addEventListener('click', () => {
          bridge.social.inviteFriends({ ok: { text: 'Invite friends' } })
        })

        socialJoinCommunityButton.addEventListener('click', () => {
          bridge.social.joinCommunity({ vk: { groupId: socialVkGroupIdInput.value } })
        })

        socialCreatePostButton.addEventListener('click', () => {
          let data = {
            vk: {
              message: socialCreatePostMessageInput.value,
              attachments: socialCreatePostAttachmentsInput.value,
            },
            ok: {
              media: [{
                "type": "text",
                "text": socialCreatePostMessageInput.value
              }]
            }
          }
          bridge.social.createPost(data)
        })

        socialAddToHomeScreenButton.addEventListener('click', () => {
          bridge.social.addToHomeScreen()
        })

        socialAddToFavoritesButton.addEventListener('click', () => {
          bridge.social.addToFavorites()
        })

        socialRateButton.addEventListener('click', () => {
          bridge.social.rate()
        })

        leaderboardGetScoreButton.addEventListener('click', () => {
          bridge
            .leaderboard
            .getScore({ yandex: { leaderboardName: leaderboardIdInput.value } })
            .then(score => {
              if (score) {
                leaderboardScoreInput.value = score
              }
            })
        })

        leaderboardSetScoreButton.addEventListener('click', () => {
          bridge
            .leaderboard
            .setScore({
              yandex: {
                score: leaderboardScoreInput.value,
                leaderboardName: leaderboardIdInput.value
              }
            })
        })

        leaderboardShowNativePopupButton.addEventListener('click', () => {
          let score = leaderboardScoreInput.value
          if (!score) {
            score = 1
          }

          bridge
            .leaderboard
            .showNativePopup({
              vk: {
                userResult: score,
                global: leaderboardVkGlobalInput.checked
              }
            })
        })

        leaderboardGetEntriesButton.addEventListener('click', () => {
          bridge
            .leaderboard
            .getEntries({
              yandex: {
                leaderboardName: leaderboardIdInput.value,
                quantityTop: leaderboardYandexQuantityTopInput.value,
                includeUser: leaderboardYandexIncludeUserInput.checked,
                quantityAround: leaderboardYandexQuantityAroundInput.value
              }
            })
            .then(data => {
              let text = ''
              data.forEach(e => {
                text += 'ID: ' + e.id + ', name: ' + e.name + ', score: ' + e.score + ', rank: ' + e.rank + ', small photo: ' + e.photos[0]
              })
              leaderboardEntriesContainer.innerText = text
            })
        })

        paymentsGetPurchasesButton.addEventListener('click', () => {
          bridge.payments.getPurchases()
            .then((purchases) =>
              paymentPurchasesContainer.innerText = JSON.stringify(purchases, undefined, 2)
            )
        })

        paymentsGetCatalogButton.addEventListener('click', () => {
          bridge.payments.getCatalog()
            .then((catalog) =>
              paymentCatalogContainer.innerText = JSON.stringify(catalog, undefined, 2)
            )
        })

        paymentsPurchaseButton.addEventListener('click', () => {
          bridge.payments.purchase({
            'yandex': document.getElementById('payments-id-input').value,
            'vk_play': {
              'merchant_param': {
                'amount': 100,                   // цена товара в рублях
                'currency': 'RUB',               // валюта, по дефолту 'RUB'
                'description': 'Золотой сундук', // описание товара в форме оплаты
                'item_id': '776',                // идентификатор заказа товара
                'additional_param': 1            // дополнительный параметр
              }
            }
          })
            .catch((error) => console.log(error))
        })

        paymentsConsumeButton.addEventListener('click', () => {
          bridge.payments.consumePurchase({ 'yandex': document.getElementById('payments-token-input').value })
            .catch((error) => console.log(error))
        })

        remoteConfigButton.addEventListener('click', () => {
          bridge.remoteConfig.get()
            .then(config => {
              remoteConfigContainer.innerText = JSON.stringify(config, undefined, 2)
            })
            .catch((error) => console.log(error))
        })

        clipboardReadButton.addEventListener('click', () => {
          bridge.clipboard.read()
            .then(text => {
              clipboardInput.value = text
            })
            .catch((error) => console.log(error))
        })

        clipboardWriteButton.addEventListener('click', () => {
          bridge.clipboard.write(clipboardInput.value)
            .then(() => console.log('success'))
            .catch((error) => console.log(error))
        })
      }, false)
    </script>
</body>

</html>